/sys/
=====

Kernel.

Structure
---------

The way objects and libraries are defined by the linker script located at
machine/MACHINE/kernel.ld.

The only architecture-specific header file is arch/ARCH/include/arch.h, and it
must be considered a header-only library. Each architecture's arch.h file must
define a consistent API by providing a common set of identifiers.

The only machine-specific header file is machine/MACHINE/include/machine.h and
it must be defined like arch.h, only for machines.

The file machine/MACHINE/arch must be a symlink the the directory of the
architecture of the machine.

The following is a list of targets which describes where they are defined and
how they depend on each other.

* libsys.a (defined in lib/, uses objects from arch/ARCH/lib/)

The target libsys.a is a static library which implements the header files in
include/.

* kernel.o (defined in src/)

The target kernel.o is a relocatable object which contains the primary
implementation of the kernel. It depends on libarch.a and libsys.a. It defines
the kmain symbol, which should be called by the main architecture-dependent
entry point.

* archkernel.o (defined in arch/ARCH/src/)

The target archkernel.o is a relocatable object which defines the main entry
point of the kernel. It depends on libarch.a, libsys.a and kernel.o.

* sys.bin (defined in /)

The main target is sys.bin, which links archkernel.o with all its dependencies.
